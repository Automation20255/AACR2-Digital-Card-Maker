<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>All-in-one AACR2 Card Generator</title>
  <style>
    :root{
      --accent:#1d4ed8; /* Darker blue for professional look */
      --muted:#6b7280;
      --card-bg:#fff;
      --paper:#f3f4f6; /* Light grey/blue background */
      --border-color:#e5e7eb;
      --shadow-color:rgba(29, 78, 216, 0.05); /* Shadow using accent color */
      --card-width:450px; --card-height:280px; --card-padding:16px; --line-height:1.35;
      --mono: 'Courier New', Courier, monospace;
    }

    *{box-sizing:border-box}
    body{
      font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color:var(--paper);
      margin:0; padding:28px;
      color:#1f2937;
    }
    .wrap{
      max-width:1200px; margin:0 auto;
      display:grid; grid-template-columns: 420px 1fr; gap:28px;
      align-items:start;
    }

    header{grid-column:1/-1; margin-bottom:10px}
    h1{font-size:24px; margin:0 0 4px 0; color:var(--accent); font-weight:700}
    p.lead{margin:0;color:var(--muted);font-size:14px}

    .panel{
      background:var(--card-bg);
      border-radius:12px; padding:20px;
      box-shadow:0 10px 20px var(--shadow-color);
      border:1px solid var(--border-color);
    }
    form{display:grid; grid-template-columns:1fr 1fr; gap:14px}
    .full{grid-column:1/3}
    label{display:block; font-size:14px; color:#374151; margin-bottom:6px; font-weight:600}
    input[type=text], textarea, select{
      width:100%; padding:10px 12px;
      border-radius:8px; border:1px solid var(--border-color);
      font-size:14px;
      transition:border-color 0.2s;
    }
    input[type=text]:focus, textarea:focus, select:focus {
      border-color: var(--accent);
      outline: none;
    }
    textarea{min-height:70px; resize:vertical}
    .small{font-size:12px; color:var(--muted); margin-top:6px}

    h4{grid-column:1/3; margin:10px 0 0 0; font-size:16px; color:var(--accent); border-bottom:1px solid var(--border-color); padding-bottom:5px}

    .controls{display:flex; gap:10px; margin-top:16px}
    button{
      background:var(--accent); color:#fff;
      border:none; padding:12px 18px;
      border-radius:8px; cursor:pointer;
      font-weight:600; font-size:15px;
      transition:background 0.2s, box-shadow 0.2s;
    }
    button:hover{background:darken(var(--accent), 5%); box-shadow:0 4px 10px rgba(29, 78, 216, 0.2)}
    button.ghost{
      background:#fff; color:var(--accent);
      border:1px solid #bfdbfe;
    }
    button.ghost:hover{background:#f3f4f6; color:var(--accent)}

    .preview{display:flex; flex-direction:column; gap:16px}
    .preview-grid{display:flex; flex-wrap:wrap; gap:20px; align-items:flex-start}
    .card-wrap{display:flex; flex-direction:column; align-items:center}

    /* AACR2 Card Styling */
    .aacr2-card{
      width:var(--card-width); height:var(--card-height);
      padding:var(--card-padding) calc(var(--card-padding) * 1.1) var(--card-padding) calc(var(--card-padding) * 3.4);
      background:var(--card-bg);
      border:1px solid #a1a1aa; border-radius:6px;
      position:relative;
      box-shadow:0 4px 12px rgba(9,10,11,0.08);
      font-family:var(--mono); font-size:12.5px; line-height:var(--line-height); color:#111;
      overflow:hidden; display:flex; flex-direction:column; justify-content:flex-start;
      /* Notebook paper lines */
      background-image:repeating-linear-gradient(transparent 0px, transparent 17.55px, rgba(0,0,0,0.05) 17.55px, rgba(0,0,0,0.05) 18.55px);
      background-size:100% 18.55px;
    }

    .call-number{position:absolute; left:10px; top:8px; text-align:left; width:120px; font-size:13px}
    .class-num{display:block; font-weight:700}
    .book-num{display:block}

    .heading{font-weight:700; text-decoration:underline; margin-top:6px; word-break:break-word}
    .main-entry{font-weight:700; margin-top:12px; margin-bottom:6px; word-break:break-word}
    .desc{margin-left:8px; margin-bottom:4px; white-space:pre-wrap; overflow-wrap:break-word}
    .ind-1{margin-left:0} /* First Indention */
    .ind-2{margin-left:20px} /* Second Indention */

    .tracing{margin-top:auto; font-size:12px; color:#52525b}
    .card-type{font-size:12px; color:var(--muted); margin-top:6px; font-style:italic}

    /* Footer Style */
    footer {
        grid-column: 1 / -1;
        text-align: center;
        margin-top: 30px;
        padding-top: 15px;
        border-top: 1px solid var(--border-color);
        font-size: 13px;
        color: var(--muted);
    }

    @media (max-width:980px){.wrap{grid-template-columns:1fr; padding:18px} form{grid-template-columns:1fr} .full{grid-column:1/2}}

    @media print{
      body{background:#fff}
      .wrap{gap:6px}
      .panel, .controls, header, footer{display:none}
      .aacr2-card{box-shadow:none; border:none}
      .card-wrap{page-break-inside: avoid;}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>ðŸ“š Visionary AACR2 Digital Card Maker </h1>
      <p class="lead">Responsive form for generating professional catalog cards based on Anglo-American Cataloguing Rules, 2nd Edition.</p>
    </header>

    <section class="panel">
      <form id="catalogForm" onsubmit="event.preventDefault(); generateCards();">

        <div class="full"><label>Accession / Local ID</label><input id="accession" type="text" value="A-2024-001"/></div>

        <label>Call Number</label><input id="callNumber" type="text" value="954.04 D286n"/>

        <label>Author / Main Entry</label><input id="mainEntry" type="text" value="Patel, Dhaval"/>

        <div class="full"><label>Title proper</label><input id="titleProper" type="text" value="The New History of Modern India"/></div>
        <label>Subtitle</label><input id="remainderTitle" type="text" value="a detailed analysis of post-colonial development"/>

        <label>Parallel title</label><input id="parallelTitle" type="text" />

        <label>Statement of responsibility</label><input id="statementResponsibility" type="text" value="by Dhaval Patel"/>

        <label>Edition</label><input id="edition" type="text" value="3rd ed."/>
        <div class="full"><label>ISBN</label><input id="isbn" type="text" value="978-0123456789"/></div>

        <h4>Imprint</h4>
        <label>Place</label><input id="placePublication" type="text" value="Gujarat"/>
        <label>Publisher</label><input id="publisher" type="text" value="LLP Press"/>
        <label>Year</label><input id="datePublication" type="text" value="2025"/>

        <h4>Physical Description</h4>
        <label>Extent</label><input id="extent" type="text" value="xx, 450 p."/>
        <label>Illustration</label><input id="illustration" type="text" value="maps, ports."/>
        <label>Dimensions</label><input id="dimension" type="text" value="23 cm."/>

        <div class="full"><label>Accompanying material</label><input id="accompanying" type="text"/></div>

        <h4>Series</h4>
        <div class="full"><label>Series Title</label><input id="seriesTitle" type="text" value="Indian History Studies"/></div>
        <label>Series Number</label><input id="seriesNumber" type="text" value="no. 5"/>

        <div class="full">
          <label>Notes (one per line)</label>
          <textarea id="notes">Includes bibliography and index
Originally presented as the author's doctoral dissertation</textarea>
        </div>

        <div class="full">
          <label>Bibliography Details (separate field)</label>
          <input id="bibliography" type="text" placeholder="Example: Includes bibliographic references"/>
        </div>

        <div class="full">
          <label>Subjects (one per line for tracing)</label>
          <textarea id="subjects">Indiaâ€”Historyâ€”1947-
Economic developmentâ€”India
Post-colonial studies</textarea>
        </div>

        <div class="controls full">
          <button type="button" onclick="generateCards()">âœ¨ Generate AACR2 Cards</button>
          <button type="button" class="ghost" onclick="resetDefaults()">ðŸ”„ Reset Defaults</button>
          </div>
      </form>
    </section>

    <aside class="preview">
      <div class="panel">
        <h3>Card Preview Area</h3>
        <div id="card-preview-area" class="preview-grid">
          <div style="color:var(--muted)">Enter data and click Generate</div>
        </div>
      </div>
    </aside>
    <footer>
        Developed by Dr. Dhaval Patel
    </footer>
  </div>

  <script>
    function splitLines(val){
      if(!val) return [];
      return val.split(/\r?\n|,/).map(v=>v.trim()).filter(Boolean);
    }

    function buildTitle(){
      const tp=document.getElementById('titleProper').value.trim();
      const st=document.getElementById('remainderTitle').value.trim();
      const pt=document.getElementById('parallelTitle').value.trim();
      const resp=document.getElementById('statementResponsibility').value.trim();

      let t=tp;
      if(st) t+=' : '+st;
      if(pt) t+=' = '+pt;
      if(resp) t+=' / '+resp;
      return t;
    }

    function buildImprint(){
      const p=document.getElementById('placePublication').value.trim();
      const pub=document.getElementById('publisher').value.trim();
      const y=document.getElementById('datePublication').value.trim();
      let s=[];
      if(p) s.push(p);
      if(pub) s.push(pub);
      let out=s.join(' : ');
      if(y) out+=(out?', ':'')+y;
      return out;
    }

    function buildCollation(){
      const e=document.getElementById('extent').value.trim();
      const il=document.getElementById('illustration').value.trim();
      const d=document.getElementById('dimension').value.trim();
      const ac=document.getElementById('accompanying').value.trim();
      let c=e;
      if(il) c+=(c?' : ':'')+il;
      if(d) c+=(c?' ; ':'')+d;
      if(ac) c+=(c?' + ':'')+ac;
      return c;
    }

    function escapeHtml(s){return (s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;')}

    function generateCards(){
      const data={
        accession:document.getElementById('accession').value.trim(),
        callNumber:document.getElementById('callNumber').value.trim(),
        mainEntry:document.getElementById('mainEntry').value.trim(),
        titleStmt:buildTitle(),
        edition:document.getElementById('edition').value.trim(),
        isbn:document.getElementById('isbn').value.trim(),
        imprint:buildImprint(),
        collation:buildCollation(),
        seriesTitle:document.getElementById('seriesTitle').value.trim(),
        seriesNumber:document.getElementById('seriesNumber').value.trim(),
        notes:splitLines(document.getElementById('notes').value),
        bibliography:document.getElementById('bibliography').value.trim(),
        subjects:splitLines(document.getElementById('subjects').value)
      };

      const preview=document.getElementById('card-preview-area');
      preview.innerHTML='';

      // 1. Main Entry Card
      preview.appendChild(cardNode(createCardHTML(data,'','Main Entry')));

      // 2. Title Card
      preview.appendChild(cardNode(createCardHTML(data,data.titleStmt.toUpperCase(),'Title Card')));

      // 3. Series Card
      if(data.seriesTitle){
        const h=(data.seriesTitle+' '+(data.seriesNumber||'')).toUpperCase();
        preview.appendChild(cardNode(createCardHTML(data,h,'Series Card')));
      }

      // 4. Subject Cards
      data.subjects.forEach(s=>{
        preview.appendChild(cardNode(createCardHTML(data,s.toUpperCase(),'Subject Card')));
      });

      // 5. Accession Card
      preview.appendChild(cardNode(createCardHTML(data,'ACCESSION: '+data.accession,'Accession Card')));
    }

    function cardNode(h){
      const w=document.createElement('div');
      w.className='card-wrap';
      w.innerHTML=h;
      return w;
    }

    function createCardHTML(d,heading,type){
      const cn=d.callNumber.split(/\s+/);
      const classNum=cn.shift()||'';
      const bookNum=cn.join(' ');

      const notesHTML=d.notes.map(n=>`<div class="desc ind-2">-- ${escapeHtml(n)}</div>`).join('');

      const bibliographyHTML=d.bibliography?
        `<div class="desc ind-2">-- Bibliography: ${escapeHtml(d.bibliography)}</div>`:'';

      const tracingHTML=d.subjects.slice(0,6)
        .map((s,i)=>`<div class="desc ind-1">${i+1}. ${escapeHtml(s)}</div>`).join('');

      return `
      <div>
      <div class="aacr2-card">
        <div class="call-number">
          <span class="class-num">${escapeHtml(classNum)}</span>
          <span class="book-num">${escapeHtml(bookNum)}</span>
        </div>

        ${heading?`<div class="heading ind-1">${escapeHtml(heading)}</div>`:''}
        <div class="main-entry ind-1">${escapeHtml(d.mainEntry)}</div>
        <div class="desc ind-2">${escapeHtml(d.titleStmt)}</div>

        ${d.edition?`<div class="desc ind-2">-- ${escapeHtml(d.edition)}</div>`:''}
        <div class="desc ind-1">${escapeHtml(d.imprint)}</div>
        <div class="desc ind-2">${escapeHtml(d.collation)}</div>

        ${d.seriesTitle?`<div class="desc ind-2">-- (${escapeHtml(d.seriesTitle)}${d.seriesNumber?', '+escapeHtml(d.seriesNumber):''})</div>`:''}

        ${d.isbn?`<div class="desc ind-2">ISBN ${escapeHtml(d.isbn)}</div>`:''}

        ${notesHTML}
        ${bibliographyHTML}

        <div class="tracing">
          ${tracingHTML}
          <div class="desc ind-1">I. Title.</div>
          ${d.seriesTitle?'<div class="desc ind-1">II. Series.</div>':''}
        </div>
      </div>
      <div class="card-type">${escapeHtml(type)}</div>
      </div>`;
    }

    function resetDefaults(){
      location.reload();
    }
  </script>
</body>
</html>
